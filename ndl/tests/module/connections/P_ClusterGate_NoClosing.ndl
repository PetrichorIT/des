module Sub {
    gates:
        in @input
        inner[5] @input
}

module A {
    submodules:
        sab: Sub
        sub[1...3]: Sub

    gates:
        out @output
        outer[5] @output

    connections:
       out --> sub[1]/inner[2
       outer[1] --> sab/inner[2
       out --> sab/in
}