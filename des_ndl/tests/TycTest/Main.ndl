include Sub
include std/Link

module TestNode {
    gates:
        out[1]
        in[5]
}

module NetworkNode {
    submodules:
        stack: NetworkStack 
        nodes[1...5]: TestNode
        router: TestNode

    gates:
        toStack[5]
        fromStack[5]

        channelIncoming[5]
        channelOutgoing[5]

        toAppl[5]
        fromAppl[5]

    connections:

        nodes/out --> router/in

        // fromStack <-- stack/netOut
        // toStack --> FastLink --> stack/netIn
        
        // fromAppl --> stack/fromAppl
        // toAppl <-- stack/toAppl

}



link A {
    bitrate: 10
    latency: 0.1
    jitter: 0.1
}


